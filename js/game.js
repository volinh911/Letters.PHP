// import { simple, intermediate, advanced, cringe } from './words/words_babi.js';

function simple() {
    return ['sea',
        'cow',
        'banana',
        'ladder',
        'book',
        'temple',
        'king',
        'queen',
        'bay',
        'beach',
        'lost',
        'love',
        'away',
        'clear',
        'time',
        'space',
        'barrel',
        'lord',
        'way',
        'bone',
        'apple',
        'teeth',
        'pear',
        'pour',
        'paint',
        'pen',
        'shirt',
        'pants',
        'score',
        'point',
        'sharp',
        'thanks',
        'sorry',
        'sign',
        'far',
        'fan',
        'memory',
        'lonely',
        'crown',
        'car',
        'star',
        'light',
        'dark',
        'low',
        'high',
        'cold',
        'hot',
        'warm',
        'heavy',
        'hard',
        'soft',
        'coat',
        'yellow',
        'red',
        'blue',
        'orange',
        'brown',
        'black',
        'white',
        'magenta',
        'pink',
        'purple',
        'gray',
        'one',
        'seven',
        'eight',
        'three',
        'carpet',
        'shadow',
        'clown',
        'shape',
        'ghost',
        'pineapple',
        'hungry',
        'thristy',
        'you',
        'bathtub',
        'shower',
        'right',
        'left',
        'sleep',
        'awake',
        'morning',
        'dawn',
        'dusk',
        'baby',
        'pretty',
        'ugly',
        'beautiful',
        'video',
        'game',
        'age',
        'kite',
        'ride',
        'while',
        'limit',
        'buddy',
        'trophy',
        'husband',
        'wife'
    ];
}
///////////////////////////////////////////////////////////////////////
function intermediate() {
    return ['gang',
        'sneeze',
        'convenience',
        'cough',
        'freeze',
        'template',
        'course',
        'magical',
        'draw',
        'softness',
        'quickly',
        'sloth',
        'blown',
        'taught',
        'tender',
        'summertime',
        'masterpiece',
        'memorize',
        'torn',
        'bumblebee',
        'sporty',
        'template',
        'designer',
        'architecture',
        'thinker',
        'paradise',
        'terrain',
        'epic',
        'historical',
        'counterpoint',
        'savage',
        'welcome',
        'hiccup',
        'reborn',
        'diploma',
        'suspense',
        'readiness',
        'swirl',
        'clown',
        'erasure',
        'twinkle',
        'pile',
        'ebb',
        'fantastical',
        'failure',
        'steep',
        'birch',
        'flight',
        'hypnos',
        'midnight',
        'grand',
        'cinematic',
        'tempest',
        'somber',
        'effortless',
        'cliff',
        'millionaire',
        'snowdrop',
        'trace',
        'scarlet',
        'tough',
        'tradition',
        'familiar',
        'skyscraper',
        'cloud',
        'helpless',
        'bathroom',
        'oak',
        'button',
        'sweep',
        'favourite',
        'tone',
        'timber',
        'colourful',
        'ending',
        'lasting',
        'flight',
        'daisy',
        'lilly',
        'sunflower',
        'pin',
        'deck',
        'lightning',
        'lighting',
        'truthful',
        'resist',
        'punch',
        'parental',
        'advice',
        'plum',
        'potent',
        'bearing',
        'sadden',
        'demand',
        'cinnamon',
        'mammal',
        'reptile',
        'venom',
        'sweetness',
        'alive'
    ];
}
///////////////////////////////////////////////////////////////////////
function advanced() {
    return ['advanced',
        'grapefruit',
        'chemtrail',
        'nostalgia',
        'aurora',
        'indie',
        'development',
        'curiousity',
        'radio',
        'swiftness',
        'undertaker',
        'limbo',
        'obsurd',
        'gleeful',
        'spiral',
        'despair',
        'pocket',
        'evolve',
        'involvement',
        'sorceress',
        'afterhour',
        'poisonous',
        'downpour',
        'benign',
        'dolt',
        'equilateral',
        'isoceles',
        'perversion',
        'obviously',
        'syringe',
        'rhytmn',
        'epitome',
        'reminiscent',
        'ergo',
        'vanguard',
        'shameless',
        'whimiscal',
        'erroneous',
        'membrane',
        'armament',
        'cyclone',
        'unbelievable',
        'melancholic',
        'cunning',
        'spine',
        'scratching',
        'strength',
        'successful',
        'rational',
        'elemental',
        'rhinoceros',
        'entendre',
        'cobblestone',
        'juxtaposition',
        'breathless',
        'eerieness',
        'thalassophobia',
        'dyeing',
        'discern',
        'ravenous',
        'vividly',
        'timid',
        'drizzle',
        'dazzle',
        'semper',
        'monotonous',
        'liquorish',
        'serpentine',
        'clarity',
        'technicolor',
        'screw',
        'paleness',
        'chagrin',
        'sunglasses',
        'lipogram',
        'telegraph',
        'portmanteau',
        'oxymoron',
        'definition',
        'disembowel',
        'monochrome',
        'hologram',
        'pneumatics',
        'summit',
        'dwindle',
        'ingenuity',
        'forensics',
        'structure',
        'honeymoon',
        'pitiful',
        'cassette',
        'bootstrap',
        'duplicate',
        'ultimatum',
        'asinine',
        'professionalism',
        'capitalism',
        'cacophonic',
        'streamline',
        'hiatus'
    ];
}
///////////////////////////////////////////////////////////////////////
function cringe() {
    return ['pneumonoultramicroscopicsilicovolcanoconiosis',
        'idyll',
        'bucolic',
        'picturesque',
        'prose',
        'oscillation',
        'skullduggery',
        'scrupulous',
        'inane',
        'risque',
        'extrapolate',
        'capitulate',
        'impervious',
        'rhetorical',
        'emblazon',
        'impromptu',
        'clandestine',
        'flamboyance',
        'flummox',
        'inveigle',
        'euphemistic',
        'infantilize',
        'ostentatious',
        'antecedent',
        'triskaidekaphobia',
        'antidisestablishmentarianism',
        'voracious',
        'penis',
        'chutzpah',
        'reverential',
        'magnanimous',
        'myoptic',
        'lackadisical',
        'obseqious',
        'anecdote',
        'infeffable',
        'ixnay',
        'dilapidate',
        'commiserate',
        'harangue',
        'phantasmagorical',
        'eponymous',
        'cringe',
        'main.html',
        'haughty',
        'denouement',
        'niche',
        'kitsch',
        'taciturn',
        'newt',
        'hackneyed',
        'curmudgeon',
        'infinitestimal',
        'desultory',
        'assiduous',
        'ebullient',
        'pedagogue',
        'pedantic',
        'minutia',
        'effervescent',
        'exsanguinate',
        'sanguimancy',
        'longeval',
        'terse',
        'adage',
        'interrobang',
        'scintillate',
        'kaleidoscope',
        'impoverish',
        'herbicide',
        'discombobulate', //egg, scrambled
        'trepidation',
        'leeway',
        'allegory',
        'opine',
        'impoverish',
        'abberant',
        'armageddon',
        'famished',
        'opulent',
        'membranous',
        'despondent',
        'petrichor',
        'explicit',
        'contentious',
        'Cajole',
        'Humbug',
        'Blarney',
        'Flirtatious',
        'aaaaaaaaaaaaaaaaaaaaaaaaa',
        'capiche',
        'ouroboros',
        'wholesome',
        'anal', // <3
        'visceral',
        'promiment',
        'promiscuous',
        'esophagus',
        'assessment',
        'panhellenism'
    ];
}
///////////////////////////////////////////////////////////////////////

var msg = document.querySelector('.msg-box');
var guess = document.querySelector('input');
var mainbtn = document.querySelector('.btn#main-btn');
var rst = document.querySelector('.btn#restart');
var noti = document.querySelector('.notifier');
var scr = document.querySelector('#score');
var spbtn = document.querySelector('#spaghetti');
var mainbox = document.querySelector('#main-box');
var gamebox = document.querySelector('#game-box');
var mainbody = document.querySelector('#mainbody');
var comedicArray = Array.prototype.slice.call(document.getElementsByClassName("comedy"));

// ===================================

var dif1 = document.querySelector(".mode-btn#simple");
var dif2 = document.querySelector(".mode-btn#inter");
var dif3 = document.querySelector(".mode-btn#advanced");
var dif4 = document.querySelector(".mode-btn#cringe");

// ===================================

var state = 0; // 0 - #9caaeb || 1 - autumn || 2 - axass
var state2 = 0;

let points = 0;

var mode = "";
var play = -1;
var choosen_word = [];
var scrambled_word = [];
var index = -1;
var arr_words = [];

//Functions, functions, plenty o' functions

// wordList.forEach(word => {
//     console.log(word);
// })

var pickMode = (btn) => {
    switch (btn.innerHTML) {
        case "Simple":
            // arr_words = simple();
            updMsg("You chosed: Simple");
            break;
        case "Intermediate":
            // arr_words = intermediate();
            updMsg("You chosed: Intermediate");
            break;
        case "Advanced":
            // arr_words = advanced();
            updMsg("You chosed: Advanced");
            break;
        case "Cringe":
            // arr_words = cringe();
            updMsg("You chosed: Cringe");
            break;
        default:
            break;
    }
    reset();
    mainbtn.innerHTML = "Click to begin";
}

var chooseWord = () => {
    let temp = [];
    var i = 0;
    while (i < 10) {
        let ran = Math.floor(Math.random() * arr_words.length);
        if (!temp.includes(arr_words[ran])) {
            i++;
            temp.push(arr_words[ran])
        }
    }
    return temp;
}

var printStringFArr = (arr) => {
    let temp = "";
    arr.forEach(s => {
        temp += s + " ";
    });
    temp[temp.length] = "";
    return temp;
}

var generateScramble = (w_arr) => {
    for (let i = w_arr.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));

        let temp = w_arr[i];
        w_arr[i] = w_arr[j];
        w_arr[j] = temp;
    }

    if (choosen_word[index] == w_arr.join(""))
        return generateScramble(w_arr);
    else
        return w_arr;
}

function updMsg(str) {
    msg.innerHTML = str;
}

// ====================================== MAIN FUNC ================================= \\

var reset = () => {
    points = 0;
    play = false;
    index = 0;
}

var start = (start_msg) => {
    choosen_word = chooseWord();
    mainbtn.innerHTML = start_msg;
    reset();
    scr.textContent = points;
    play = true;
}

var updateGame = () => {
    guess.value = "";
    if (index < 10) {
        console.log(index + ": " + choosen_word[index]);
        scrambled_word = generateScramble(choosen_word[index].split(""));
        updMsg(printStringFArr(scrambled_word));
        index++;
    } else {
        console.log("Done");
        updMsg("You score: " + points + "/10");
        reset();
        mainbtn.innerHTML = "Play Again ?";
        guess.classList.toggle("hidden");
    }
}

const gameController = () => {
    if (!play) {
        start("Guess");
        console.log("_______ START GAME")
            // mainbtn.innerHTML = "Guess";
        guess.classList.toggle('hidden');
        updateGame();
    } else
    if (play == true) {
        let temp = guess.value;
        if (temp == choosen_word[index - 1]) {
            noti.innerHTML = "right.._____..";
            setTimeout(() => {
                fadeIn(noti);
            }, 10);
            setTimeout(() => {
                fadeOut(noti);
            }, 700);
            points++;
        } else {
            noti.innerHTML = "Wrong :3";
            setTimeout(() => {
                fadeIn(noti);
            }, 10);
            setTimeout(() => {
                fadeOut(noti);
            }, 700);
        }
        scr.textContent = points;
        updateGame();
    }
}

// ====================================== EVENT LISTENERS ================================= \\

$("#guess-field").on('keyup', function(e) {
    if (e.key === 'Enter' || e.keyCode === 13) {
        console.log("Logged: ENTERED");
        gameController();
    }
});

mainbtn.addEventListener('click', function() {
    console.log("Logged: CLICKED");
    gameController();
});

guess.addEventListener('keyup', () => {
    let temp = scrambled_word.slice(0);
    var i = -1;
    Array.from(guess.value).forEach(c => {
        i = temp.indexOf(c);
        if (i != -1)
            delete temp[temp.indexOf(c)];
    });
    updMsg(printStringFArr(temp));
});

spbtn.addEventListener('click', () => {
    if (state == 2)
        state = 0;
    else
        state++;

    if (state2 > 0)
        state2 = 0;
    else
        state2++;

    mainbody.className = "bodybg";
    document.querySelector(".bodybg").style.backgroundColor = "#7fffd4"; //aquamarine
    document.querySelector(".logo").style.color = "#2b1055";
    comedicArray.forEach(c => {
        c.style.color = "#2b1055";
    });

    switch (state) {
        case 1:
            mainbox.className = "";
            mainbody.className = "autumn";
            gamebox.className = "game-box invis justify-content-center align-items-center d-flex";
            document.querySelector(".logo").style.color = "#fff";
            comedicArray.forEach(c => {
                c.style.color = "#fff";
            });
            break;
        case 2:
            document.querySelector(".bodybg").style.backgroundColor = "#e5cdfd";
            mainbox.className = "axass";
            gamebox.className = "game-box invis justify-content-center align-items-center d-flex";
            break;
        default:
            // mainbody.className = "bodybg";
            mainbox.className = "main-box";
            gamebox.className = "game-box justify-content-center align-items-center d-flex";
            break;
    }

    if (state2 == 1)
        document.querySelector('#title').className = "rainbow_text_animated";
    else
        document.querySelector('#title').className = "";
});

dif1.addEventListener("click", () => {
    var word = document.getElementById("word-holder1").innerHTML;
    arr_words = word.split(' ');

    if (play != true) {
        pickMode(dif1);
    }
});

dif2.addEventListener("click", () => {
    var word = document.getElementById("word-holder2").innerHTML;
    arr_words = word.split(' ');

    if (play != true) {
        pickMode(dif2);
    }
});

dif3.addEventListener("click", () => {
    var word = document.getElementById("word-holder3").innerHTML;
    arr_words = word.split(' ');

    if (play != true) {
        pickMode(dif3);
    }
});

dif4.addEventListener("click", () => {
    var word = document.getElementById("word-holder4").innerHTML;
    arr_words = word.split(' ');

    if (play != true) {
        pickMode(dif4);
    }
});

// ====================================== HELPERS ================================= \\

function fadeOut(el) {
    el.style.opacity = "0";
    setTimeout(() => {
        el.style.display = "none";
    }, 100);
}

function fadeIn(el) {
    el.style.display = "initial";
    setTimeout(() => {
        el.style.opacity = "1";
    }, 10);
}